import{i as O,n as w,t as b,a as _,b as S,c as q,d as F,e as C}from"./index.1ec31925.js";import{ah as z,r as A,ai as P,k as R,h as g,U as I,aj as k,ak as B,i as W,al as T}from"./entry.25dad13e.js";function V(n,c,o){let t;z(o)?t={evaluating:o}:t=o||{};const{lazy:u=!1,evaluating:r=void 0,shallow:d=!0,onError:i=w}=t,s=A(!u),f=d?P(c):A(c);let a=0;return R(async m=>{if(!s.value)return;a++;const e=a;let l=!1;r&&Promise.resolve().then(()=>{r.value=!0});try{const p=await n(M=>{m(()=>{r&&(r.value=!1),l||M()})});e===a&&(f.value=p)}catch(p){i(p)}finally{r&&e===a&&(r.value=!1),l=!0}}),u?g(()=>(s.value=!0,f.value)):f}function v(n){var c;const o=_(n);return(c=o==null?void 0:o.$el)!=null?c:o}const y=S?window:void 0;function E(...n){let c,o,t,u;if(typeof n[0]=="string"||Array.isArray(n[0])?([o,t,u]=n,c=y):[c,o,t,u]=n,!c)return w;Array.isArray(o)||(o=[o]),Array.isArray(t)||(t=[t]);const r=[],d=()=>{r.forEach(a=>a()),r.length=0},i=(a,m,e,l)=>(a.addEventListener(m,e,l),()=>a.removeEventListener(m,e,l)),s=I(()=>[v(c),_(u)],([a,m])=>{if(d(),!a)return;const e=q(m)?{...m}:m;r.push(...o.flatMap(l=>t.map(p=>i(a,l,p,e))))},{immediate:!0,flush:"post"}),f=()=>{s(),d()};return b(f),f}let L=!1;function $(n,c,o={}){const{window:t=y,ignore:u=[],capture:r=!0,detectIframe:d=!1}=o;if(!t)return;O&&!L&&(L=!0,Array.from(t.document.body.children).forEach(e=>e.addEventListener("click",w)),t.document.documentElement.addEventListener("click",w));let i=!0;const s=e=>u.some(l=>{if(typeof l=="string")return Array.from(t.document.querySelectorAll(l)).some(p=>p===e.target||e.composedPath().includes(p));{const p=v(l);return p&&(e.target===p||e.composedPath().includes(p))}}),a=[E(t,"click",e=>{const l=v(n);if(!(!l||l===e.target||e.composedPath().includes(l))){if(e.detail===0&&(i=!s(e)),!i){i=!0;return}c(e)}},{passive:!0,capture:r}),E(t,"pointerdown",e=>{const l=v(n);i=!s(e)&&!!(l&&!e.composedPath().includes(l))},{passive:!0}),d&&E(t,"blur",e=>{setTimeout(()=>{var l;const p=v(n);((l=t.document.activeElement)==null?void 0:l.tagName)==="IFRAME"&&!(p!=null&&p.contains(t.document.activeElement))&&c(e)},0)})].filter(Boolean);return()=>a.forEach(e=>e())}function j(){const n=A(!1);return B()&&W(()=>{n.value=!0}),n}function x(n){const c=j();return g(()=>(c.value,!!n()))}function D(n,c={}){const{immediate:o=!0,fpsLimit:t=void 0,window:u=y}=c,r=A(!1),d=t?1e3/t:null;let i=0,s=null;function f(e){if(!r.value||!u)return;const l=e-(i||e);if(d&&l<d){s=u.requestAnimationFrame(f);return}n({delta:l,timestamp:e}),i=e,s=u.requestAnimationFrame(f)}function a(){!r.value&&u&&(r.value=!0,s=u.requestAnimationFrame(f))}function m(){r.value=!1,s!=null&&u&&(u.cancelAnimationFrame(s),s=null)}return o&&a(),b(m),{isActive:T(r),pause:m,resume:a}}function G(n,c,o={}){const{window:t=y,...u}=o;let r;const d=x(()=>t&&"ResizeObserver"in t),i=()=>{r&&(r.disconnect(),r=void 0)},s=g(()=>Array.isArray(n)?n.map(m=>v(m)):[v(n)]),f=I(s,m=>{if(i(),d.value&&t){r=new ResizeObserver(c);for(const e of m)e&&r.observe(e,u)}},{immediate:!0,flush:"post",deep:!0}),a=()=>{i(),f()};return b(a),{isSupported:d,stop:a}}const h=new Map;function H(n){const c=k();function o(i){var s;const f=h.get(n)||new Set;f.add(i),h.set(n,f);const a=()=>u(i);return(s=c==null?void 0:c.cleanups)==null||s.push(a),a}function t(i){function s(...f){u(s),i(...f)}return o(s)}function u(i){const s=h.get(n);s&&(s.delete(i),s.size||r())}function r(){h.delete(n)}function d(i,s){var f;(f=h.get(n))==null||f.forEach(a=>a(i,s))}return{on:o,once:t,off:u,emit:d,reset:r}}function J(n={}){const{controls:c=!1,offset:o=0,immediate:t=!0,interval:u="requestAnimationFrame",callback:r}=n,d=A(F()+o),i=()=>d.value=F()+o,s=r?()=>{i(),r(d.value)}:i,f=u==="requestAnimationFrame"?D(s,{immediate:t}):C(s,u,{immediate:t});return c?{timestamp:d,...f}:d}export{v as a,G as b,V as c,J as d,$ as o,H as u};
